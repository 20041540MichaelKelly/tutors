import{c as R}from"../chunks/course-service.39a23dd1.js";import{a as F}from"../chunks/stores.e6516f52.js";import{S as z,i as B,s as Q,k as y,q as P,a as k,l as b,m as E,r as O,h as v,c as x,n as p,b as q,P as _,am as w,Q as U,Y as H,ag as Y,o as j,u as G}from"../chunks/index.724b717b.js";import{r as J,a as K,c as W}from"../chunks/course.d958946a.js";const X=!1,Z=async({params:e})=>{const n=await R.readCourse(e.courseid);return F.set(n.lo),{course:n,lo:n.lo}},Ee=Object.freeze(Object.defineProperty({__proto__:null,load:Z,ssr:X},Symbol.toStringTag,{value:"Module"})),$=100,ee="```",te="~~~";function ne(e,n){const t=le(e),r=[];return t.forEach(s=>{var i;const o=s.lab.contentMd,a=re(o,n);for(const f of a){const g={fenced:f.style!=="unfenced",language:f.language,contentMd:f.content,lab:s.lab,title:`${s.lab.parentLo.title}/${J(s.lab.title)}`,link:(i=s.lab)==null?void 0:i.route,html:""};g.link=g.link.substring(1),r.push(g)}}),r.slice(0,$)}function re(e,n){const t=[],r=T(e,n);for(let s=0;s<r.length;s+=1){const o=he(n,r[s],e),a=ue(e,r[s]);let i="";a==="fenced"&&(i=ae(e,r[s]));const f=se(e,r[s]);t.push({content:o,style:a,fence:f,language:i})}return t}function ae(e,n){const t=M(e),r=A(t,n);let s="",o=r[1]+3;for(;e.charAt(o)!==`
`;)s+=e.charAt(o),o+=1;return s}function se(e,n){const t=M(e),r=A(t,n);return e.charAt(r[1])==="~"?"~~~":"```"}function le(e){return C(e,"")}function C(e,n,t=[]){for(let r=0,s=e.length;r<s;r++){const o=e[r];Array.isArray(o.los)?C(o.los,e[r].parent.lo.title,t):t.push({lab:o,topicTitle:n})}return t}function oe(e){return e.trim().length===0}function ce(e){return!oe(e)}function T(e,n){const t=[];function r(s,o,a){let i=s.indexOf(o);if(i!=-1){const f=i;a.length&&(i+=a[a.length-1]+o.length),a.push(i),r(s.slice(f+o.length),o,a)}else return}return r(e,n,t),t}function M(e){const n=N(e,ee).concat(N(e,te));return ie(n)}function ie(e){return e.sort((n,t)=>n-t)}function ue(e,n){const t=M(e);if(t.length==0)return"unfenced";const r=A(t,n);return fe(r[0])?"fenced":"unfenced"}function N(e,n){return T(e,n)}function fe(e){return e%2==0}function he(e,n,t){const r=T(t,pe()),s=A(r,n),o=de(r,n,t.length);return t.substring(s[1],o[1])}function A(e,n){for(let t=e.length-1;t>=0;t--)if(e[t]<n)return[t,e[t]];return[-1,-1]}function de(e,n,t){for(let r=0;r<e.length;r+=1){if(n>e[e.length-1])return[r,t];if(e[r]>n)return[r,e[r]]}return[-1,-1]}function pe(){return`
`}function V(e,n,t){const r=e.slice();return r[7]=n[t],r}function D(e){let n,t,r,s=e[7].html+"",o,a,i,f=e[7].title+"",g,m,h;return{c(){n=y("div"),t=y("div"),r=y("div"),o=k(),a=y("div"),i=y("a"),g=P(f),h=k(),this.h()},l(l){n=b(l,"DIV",{class:!0});var c=E(n);t=b(c,"DIV",{});var d=E(t);r=b(d,"DIV",{});var u=E(r);u.forEach(v),o=x(d),a=b(d,"DIV",{class:!0});var L=E(a);i=b(L,"A",{rel:!0,href:!0,target:!0});var S=E(i);g=O(S,f),S.forEach(v),L.forEach(v),d.forEach(v),h=x(c),c.forEach(v),this.h()},h(){p(i,"rel","noopener noreferrer"),p(i,"href",m=e[7].link),p(i,"target","_blank"),p(a,"class","pt-4 text-right text-sm"),p(n,"class","card m-1 w-full p-4 lg:w-72 2xl:w-96")},m(l,c){q(l,n,c),_(n,t),_(t,r),r.innerHTML=s,_(t,o),_(t,a),_(a,i),_(i,g),_(n,h)},p(l,c){c&2&&s!==(s=l[7].html+"")&&(r.innerHTML=s),c&2&&f!==(f=l[7].title+"")&&G(g,f),c&2&&m!==(m=l[7].link)&&p(i,"href",m)},d(l){l&&v(n)}}}function ge(e){let n,t,r,s,o,a,i,f,g,m,h=e[1],l=[];for(let c=0;c<h.length;c+=1)l[c]=D(V(e,h,c));return{c(){n=y("div"),t=y("label"),r=y("span"),s=P("Enter search term:"),o=k(),a=y("input"),i=k(),f=y("div");for(let c=0;c<l.length;c+=1)l[c].c();this.h()},l(c){n=b(c,"DIV",{class:!0});var d=E(n);t=b(d,"LABEL",{for:!0,class:!0});var u=E(t);r=b(u,"SPAN",{});var L=E(r);s=O(L,"Enter search term:"),L.forEach(v),o=x(u),a=b(u,"INPUT",{type:!0,name:!0,id:!0,class:!0,placeholder:!0}),u.forEach(v),i=x(d),f=b(d,"DIV",{class:!0});var S=E(f);for(let I=0;I<l.length;I+=1)l[I].l(S);S.forEach(v),d.forEach(v),this.h()},h(){p(a,"type","text"),p(a,"name","search"),p(a,"id","search"),p(a,"class","m-2 p-2 input"),p(a,"placeholder","..."),p(t,"for","search"),p(t,"class","label"),p(f,"class","flex flex-wrap justify-center"),p(n,"class","card container mx-auto p-4")},m(c,d){q(c,n,d),_(n,t),_(t,r),_(r,s),_(t,o),_(t,a),w(a,e[0]),_(n,i),_(n,f);for(let u=0;u<l.length;u+=1)l[u]&&l[u].m(f,null);g||(m=U(a,"input",e[4]),g=!0)},p(c,[d]){if(d&1&&a.value!==c[0]&&w(a,c[0]),d&2){h=c[1];let u;for(u=0;u<h.length;u+=1){const L=V(c,h,u);l[u]?l[u].p(L,d):(l[u]=D(L),l[u].c(),l[u].m(f,null))}for(;u<l.length;u+=1)l[u].d(1);l.length=h.length}},i:H,o:H,d(c){c&&v(n),Y(l,c),g=!1,m()}}}function _e(e,n,t){let{data:r}=n,s,o=[],a="",i=[];j(async()=>{s=r.course,F.set(r.course.lo),t(3,o=K("lab",r.course.lo.los))});function f(m){m.forEach(h=>{let l=[];h.fenced&&l.push(`~~~${h.language}`),l.push(h.contentMd),h.fenced&&l.push("~~~"),h.html=W(l.join(`
`),s.url),h.link=`https://reader.tutors.dev/${h.link}`})}function g(){a=this.value,t(0,a)}return e.$$set=m=>{"data"in m&&t(2,r=m.data)},e.$$.update=()=>{e.$$.dirty&11&&ce(a)&&(t(1,i=ne(o,a)),f(i))},[a,i,r,o,g]}class Le extends z{constructor(n){super(),B(this,n,_e,ge,Q,{data:2})}}export{Le as component,Ee as universal};
