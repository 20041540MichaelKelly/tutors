import{i as U,f as B,g as O,N as R,d as V,e as C,o as q,c as y,h as F,j as K}from"../chunks/NavBar.74c12207.js";import{S,i as G,s as H,a as L,k as J,y as T,N as Q,h as g,c as $,l as W,m as X,z as I,n as Y,b as v,A as D,g as k,d as z,B as A,o as Z}from"../chunks/index.cffe94cb.js";import"../chunks/stores.a3126324.js";import{C as x}from"../chunks/CourseCardDeck.545ddbef.js";const ee=async({params:t})=>(U(O().firebase),{allCourses:await B()}),le=Object.freeze(Object.defineProperty({__proto__:null,load:ee},Symbol.toStringTag,{value:"Module"}));function te(t){let r,n,u,o,f,l,d;return document.title=r=h,o=new R({props:{title:h,subTitle:t[2],modules:t[1],visits:t[3],users:t[4]}}),l=new x({props:{los:t[0]}}),{c(){n=L(),u=J("div"),T(o.$$.fragment),f=L(),T(l.$$.fragment),this.h()},l(e){Q("svelte-1258swp",document.head).forEach(g),n=$(e),u=W(e,"DIV",{class:!0});var i=X(u);I(o.$$.fragment,i),i.forEach(g),f=$(e),I(l.$$.fragment,e),this.h()},h(){Y(u,"class","sticky top-0 z-40 mb-5")},m(e,s){v(e,n,s),v(e,u,s),D(o,u,null),v(e,f,s),D(l,e,s),d=!0},p(e,[s]){(!d||s&0)&&r!==(r=h)&&(document.title=r);const i={};s&4&&(i.subTitle=e[2]),s&2&&(i.modules=e[1]),s&8&&(i.visits=e[3]),s&16&&(i.users=e[4]),o.$set(i);const p={};s&1&&(p.los=e[0]),l.$set(p)},i(e){d||(k(o.$$.fragment,e),k(l.$$.fragment,e),d=!0)},o(e){z(o.$$.fragment,e),z(l.$$.fragment,e),d=!1},d(e){e&&g(n),e&&g(u),A(o),e&&g(f),A(l,e)}}}let h="Tutors Module Activity";function se(t){var r,n;t.currentLo.route=`https://reader.tutors.dev${(r=t.currentLo)==null?void 0:r.subRoute}`,t.img=(n=t.currentLo)==null?void 0:n.img,t.currentLo.icon?t.icon=t.currentLo.icon:t.icon=null}function ne(t,r,n){const u=V();let{data:o}=r,f=[],l=new Map,d=0,e="Connecting ...",s="",i=0;const p=new Set;let b=0,_=20,w=!1,M=setInterval(function(){s=new Date().toLocaleTimeString(),n(2,e=`Connecting in ${_} seconds`),_--,_==0&&(clearInterval(M),s=new Date().toLocaleTimeString(),n(2,e=`Connected at : ${s}`),w=!0)},1e3);function N(a){a.currentLo.tutorsTimeId&&(p.add(a.currentLo.tutorsTimeId),a.studentIds.add(a.currentLo.tutorsTimeId),n(4,b=p.size))}async function j(a){let c=l.get(a);if(!c){if(c=await y(a),c.isPrivate)return;l.set(a,c),f.push(c)}const m=await(await F(K(C(u),`all-course-access/${a}`))).val();m.lo&&(c.currentLo=m.lo,c.visits=m.visits,se(c),N(c),n(0,f=[...f]),n(1,d=f.length))}async function E(a){a.forEach(c=>{const m=c.courseId,P=C(u,`all-course-access/${m}/visits`);q(P,async()=>{w&&(await j(m),n(3,i++,i))})})}return Z(async()=>{o.allCourses&&E(o.allCourses)}),t.$$set=a=>{"data"in a&&n(5,o=a.data)},[f,d,e,i,b,o]}class ce extends S{constructor(r){super(),G(this,r,ne,te,H,{data:5})}}export{ce as component,le as universal};
